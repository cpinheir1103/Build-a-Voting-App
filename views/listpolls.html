<!DOCTYPE html>
<html>
  <head>
    <title>Voting App</title>
    <meta name="description" content="A cool thing made with Glitch">
    <link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/style.css">
    <script src="https://code.jquery.com/jquery-2.2.1.min.js"
            integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00="
            crossorigin="anonymous"></script>
    <script>
        $(function() {  
          console.log("Document ready!");
          
          var retStr = "";
          
          function createPollHtml (elm) { 
            retStr += "<a href='showpoll?name=" + encodeURI(elm.name) + "'><p>" + elm.name + "</p></a>";
          }
          
          function dataReady(data) {
            console.log("allpolldata=" + JSON.stringify(data));
            data.forEach(createPollHtml);
            $("#contentDiv").html(retStr);
          }

          console.log("sending get request...");
          $.get('/getAllPolls', dataReady);
        });  
    </script>
  </head>
  <body>
    <h1>
      All Polls:
    </h1>
    <div id="contentDiv">   
       
    </div>
        
  </body>
</html>